<div class="flex h-screen w-screen max-h-screen food-component">
  <section class="flex flex-col gap-10 brandColor items-center pt-6 w-32 right-section slide"
    [ngClass]="{'opened': navClicked}">
    <a href="/"><img class="w-24 h-24 m-0 p-0" src="../../../assets/spicy-logo.png" alt="" srcset="">
      <svg (click)="navClicked = !navClicked" class="absolute -right-12 top-4 h-4 w-4 my-3 mx-4 cursor-pointer"
        height="365.696pt" viewBox="0 0 365.696 365.696" width="365.696pt" xmlns="http://www.w3.org/2000/svg">
        <path
          d="m243.1875 182.859375 113.132812-113.132813c12.5-12.5 12.5-32.765624 0-45.246093l-15.082031-15.082031c-12.503906-12.503907-32.769531-12.503907-45.25 0l-113.128906 113.128906-113.132813-113.152344c-12.5-12.5-32.765624-12.5-45.246093 0l-15.105469 15.082031c-12.5 12.503907-12.5 32.769531 0 45.25l113.152344 113.152344-113.128906 113.128906c-12.503907 12.503907-12.503907 32.769531 0 45.25l15.082031 15.082031c12.5 12.5 32.765625 12.5 45.246093 0l113.132813-113.132812 113.128906 113.132812c12.503907 12.5 32.769531 12.5 45.25 0l15.082031-15.082031c12.5-12.503906 12.5-32.769531 0-45.25zm0 0" />
      </svg>

    </a>
    <span class="flex gap-2 justify-center bg-white w-full">
      <svg class="fill-current text-black w-4" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 294.843 294.843"
        style="enable-background:new 0 0 294.843 294.843;" xml:space="preserve">
        <g>
          <path d="M147.421,0C66.133,0,0,66.133,0,147.421c0,40.968,17.259,80.425,47.351,108.255c2.433,2.25,6.229,2.101,8.479-0.331
           c2.25-2.434,2.102-6.229-0.332-8.479C27.854,221.3,12,185.054,12,147.421C12,72.75,72.75,12,147.421,12
           s135.421,60.75,135.421,135.421s-60.75,135.421-135.421,135.421c-3.313,0-6,2.687-6,6s2.687,6,6,6
           c81.289,0,147.421-66.133,147.421-147.421S228.71,0,147.421,0z" />
          <path
            d="M84.185,90.185h126.473c3.313,0,6-2.687,6-6s-2.687-6-6-6H84.185c-3.313,0-6,2.687-6,6S80.872,90.185,84.185,90.185z" />
          <path
            d="M84.185,153.421h126.473c3.313,0,6-2.687,6-6s-2.687-6-6-6H84.185c-3.313,0-6,2.687-6,6S80.872,153.421,84.185,153.421z" />
          <path d="M216.658,210.658c0-3.313-2.687-6-6-6H84.185c-3.313,0-6,2.687-6,6s2.687,6,6,6h126.473
           C213.971,216.658,216.658,213.971,216.658,210.658z" />
        </g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
      </svg>
      <p class="font-bold text-sm text-black padding-4">Menu</p>
    </span>
    <div class="grid gap-4 justify-center">
      <p [routerLink]="['/feedback']" class="border-b-2 border-transparent hover:border-white cursor-pointer">Feedback
      </p>
      <p [routerLink]="['/reservation']" class="border-b-2 border-transparent hover:border-white cursor-pointer">Reserve
        Table</p>
      <p [routerLink]="['/login']" *ngIf="!userName"
        class="border-b-2 border-transparent hover:border-white cursor-pointer">Login</p>
    </div>
  </section>
  <div class="w-32">
    <svg (click)="navClicked = !navClicked" class="h-4 w-4 my-3 mx-4 cursor-pointer" height="384pt"
      viewBox="0 -53 384 384" width="384pt" xmlns="http://www.w3.org/2000/svg">
      <path
        d="m368 154.667969h-352c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h352c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0" />
      <path
        d="m368 32h-352c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h352c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0" />
      <path
        d="m368 277.332031h-352c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h352c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0" />
    </svg>
    <!-- <p class="text-lg px-4 py-1 pt-2 hi ">Welcome {{userName ? userName: 'Guest'}}</p> -->
  </div>
  <section class="flex-1 main-section max-h-screen overflow-hidden bg-white">
    <!-- MAIN CATEGORY  -->
    <!-- <p class="text-lg px-4 py-1 pt-2 hi mr-8 pl-0 mb-8"></p> -->

    <p *ngIf="!navClicked" class="text-lg absolute top-2 left-14">Welcome {{userName ? userName: 'Guest'}}</p>
    <div class="main-cat flex flex-row items-center gap-4 mt-12 justify-center">
      <div class="main-cat-box grad_1_hover zoom-in"
        [ngClass]="{'brandColor': catSelectedIndex == i , 'grad_2': catSelectedIndex !== i }"
        *ngFor="let item of categoryList; index as i" (click)="itemSelected(i, item.title, 'main')">
        <img class="h-4 w-4" [src]="item.url" alt="" srcset="" *ngIf="item.url">
        <p [ngClass]="{'bold-look': catSelectedIndex == i}">{{item.title}}</p>
      </div>
    </div>
    <!-- SUB CATEGORY -->
    <div class="sub-cat h-12 w-full mt-4 flex flex-row items-center gap-8 justify-center">
      <div class="sub-box cursor-pointer" *ngFor="let item of subCat; index as i"
        [ngClass]="{'sub-selected':subCatSelectedIndex === i}" (click)="subCatData(i, item)">
        <p class="zoom-in hover:font-bold" [ngClass]="{'bold-look': subCatSelectedIndex == i}">{{item}}</p>
      </div>
    </div>
    <!-- FOOD ITEMS -->
    <div class="food-item-container h-full overflow-y-scroll mt-4">
      <div class="food-items py-8 px-2 grid grid-cols-fill-40 gap-4 justify-center pb-40" *ngIf="subCat.length > 0">
        <div class="relative zoom-in cursor-pointer food-item flex flex-col bg-gray-100 h-64 w-56 rounded-xl shadow-md"
          *ngFor="let item of finalResults" (click)="onProductView(item)">
          <img src="../../../assets/menu-items/{{item.image || 'food.JPG'}}" class="w-full h-2/4 rounded-t-xl" alt=""
            srcset="">
          <div class="content">
            <div class="flex justify-between p-1">
              <p class="bold">{{item.name}}</p>
            </div>
            <p class="font-normal text-sm p-1 short-text">{{item.description}}</p>
          </div>
          <div class="absolute flex justify-center -top-4 -right-2 w-12 h-12 rounded-full brandColor">
            <p class="bold text-md text-center flex items-center justify-items-center text-white">€{{item.amount}}</p>
          </div>
          <!-- <span class="text-xs flex-shrink-0 p-1 pr-2 pl-2 grad_1 w-auto rounded-2xl">Add Meal</span> -->
        </div>
      </div>
      <div *ngIf="subCat.length <= 0" class="grid justify-center items-center">
        <p>No food items are available for now. Please select the another menu</p>
      </div>
    </div>
  </section>
  <section class="bg-gray-100 w-80 left-section">
    <div class="cart-container h-full flex flex-col justify-items-center items-center justify-between gap-2">
      <div class="title w-full mt-2 flex-0">
        <p class="text-center font-bold text-lg">Your Orders</p>
      </div>
      <div class="overflow-y-scroll flex-1 flex items flex-col gap-2 w-full items-center">
        <!-- <div class="flex item w-11/12 rounded-md bg-white gap-2 border-b-2 border-gray-300 padding-4 flex-row"
          *ngFor="let item of cartItems.itemList">
          <i class="fa fa-edit" (click)="onCartEdit(item)"></i>
          <div class="relative flex flex-col gap-2 items-center">
            <img src="../../../assets/menu-items/food.JPG" class="flex-grow-0 w-16 h-16 rounded-xl" alt="" srcset="">
            <p>€{{item.amount*item.quantity}}</p>
          </div>
          <div class="content flex flex-col justify-between items-start flex-1 rounded-sm gap-1">
            <p class="text-black text-sm">{{item.name}}</p>
            <div class="addon-items" *ngFor="let addon of item.addOnItemList; let i = index">
              <p class="text-xs text-gray-900 italic">{{i+1}} {{addon.name}}</p>
            </div>
            <span class="flex shadow-2xl p-1 flex-row bg-gray-100 gap-2 self-end justify-end">
              <p class="pr-1 pl-1 text-md cursor-pointer" (click)="item.quantity-1>0?item.quantity=item.quantity-1:item.quantity;addToCard(item)">-</p>
              <p class="text-green-700 text-sm">{{item.quantity ? item.quantity: 1}}</p>
              <p class="pr-1 pl-1 text-green-700 text-md cursor-pointer" (click)="item.quantity=item.quantity+1;addToCard(item)">+</p>
            </span>
          </div>
        </div> -->

        <div class="w-11/12" *ngIf="cartItems && cartItems.itemList">
          <div class="flex item  rounded-md bg-white gap-2 border-b-2 border-gray-300 padding-4 flex-row"
            *ngFor="let item of cartItems.itemList">
            <div class="order-container">
              <div class="top">
                <div class="image">
                  <img src="../../../assets/menu-items/{{item.image || 'food.JPG'}}"
                    class="flex-grow-0 w-16 h-16 rounded-xl" alt="" srcset="">
                </div>
                <div class="oc-content">
                  <p class="text-black text-sm">{{item.name}}</p>
                  <!--<div *ngIf="item && item.addOnItemList && item.addOnItemList.length > 0"> -->
                  <div class="addon-items" *ngFor="let addon of item.addOnItemList; let i = index">
                    <p class="text-xs text-gray-900 italic">{{i+1}} {{addon.name}}</p>
                  </div>
                  <!--</div> -->

                </div>
                <div class="price">
                  <p>€{{((item.amount ?item.amount: 0) + totalAddon(item.addOnItemList)) * item.quantity | number :
                    '1.2-2'
                    }}</p>
                </div>
              </div>
              <div class="bottom">
                <span class="flex shadow-2xl p-1 flex-row bg-gray-100 gap-2 self-end justify-end">
                  <p class="pr-1 pl-1 text-md cursor-pointer"
                    (click)="cartItemSelectedData=item;item.quantity-1>=0?item.quantity=item.quantity-1:item.quantity;addToCard(item, 'minus', item.identifier)">
                    -</p>
                  <p class="text-green-700 text-sm">{{item.quantity ? item.quantity: 1}}</p>

                  <p class="pr-1 pl-1 text-green-700 text-md cursor-pointer"
                    (click)="cartItemSelectedData=item; (item && item.addOnItemList && item.addOnItemList.length > 0) ? isConfirmPopup=true:addToCard(item, 'plus', item.identifier)">
                    +</p>
                </span>
                <svg version="1.1" id="Capa_1" class="edit-icon" xmlns="http://www.w3.org/2000/svg"
                  (click)="cartItemSelectedData=item; onCartEdit(item)" xmlns:xlink="http://www.w3.org/1999/xlink"
                  x="0px" y="0px" viewBox="0 0 477.873 477.873" style="enable-background:new 0 0 477.873 477.873;"
                  xml:space="preserve">
                  <g>
                    <g>
                      <path d="M392.533,238.937c-9.426,0-17.067,7.641-17.067,17.067V426.67c0,9.426-7.641,17.067-17.067,17.067H51.2
			c-9.426,0-17.067-7.641-17.067-17.067V85.337c0-9.426,7.641-17.067,17.067-17.067H256c9.426,0,17.067-7.641,17.067-17.067
			S265.426,34.137,256,34.137H51.2C22.923,34.137,0,57.06,0,85.337V426.67c0,28.277,22.923,51.2,51.2,51.2h307.2
			c28.277,0,51.2-22.923,51.2-51.2V256.003C409.6,246.578,401.959,238.937,392.533,238.937z" />
                    </g>
                  </g>
                  <g>
                    <g>
                      <path d="M458.742,19.142c-12.254-12.256-28.875-19.14-46.206-19.138c-17.341-0.05-33.979,6.846-46.199,19.149L141.534,243.937
			c-1.865,1.879-3.272,4.163-4.113,6.673l-34.133,102.4c-2.979,8.943,1.856,18.607,10.799,21.585
			c1.735,0.578,3.552,0.873,5.38,0.875c1.832-0.003,3.653-0.297,5.393-0.87l102.4-34.133c2.515-0.84,4.8-2.254,6.673-4.13
			l224.802-224.802C484.25,86.023,484.253,44.657,458.742,19.142z" />
                    </g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                </svg>
              </div>
            </div>
          </div>
        </div>

      </div>

      <div *ngIf="cartItems && cartItems.totalAmount == 0" class="absolute top-1/2">
        <img src="../../../assets/images/icons/noorder.jpg" class="w-24 h-24" alt="" srcset="">
      </div>
      <div
        class="price-details  grad_2 shadow-2xl rounded-t-2xl w-full flex-none gap-4 flex flex-col p-4 justify-items-start"
        *ngIf="cartItems && cartItems.totalAmount !== 0">
        <div class="flex flex-row justify-between">
          <p>Sub Total</p>
          <p>€{{cartItems.subTotal}}</p>
        </div>
        <div class="flex flex-row justify-between">
          <p>Tax</p>
          <p>€{{cartItems.tax}}</p>
        </div>
        <div class="flex flex-row justify-between">
          <p>Total</p>
          <p>€{{cartItems.totalAmount}}</p>
        </div>
        <div class="w-full cursor-pointer zoom-in gap-4 bg-red-800 h-12 flex items-center justify-center rounded-xl">
          <svg class="fill-current text-white" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
            viewBox="0 0 24 24">
            <path
              d="M10 19.5c0 .829-.672 1.5-1.5 1.5s-1.5-.671-1.5-1.5c0-.828.672-1.5 1.5-1.5s1.5.672 1.5 1.5zm3.5-1.5c-.828 0-1.5.671-1.5 1.5s.672 1.5 1.5 1.5 1.5-.671 1.5-1.5c0-.828-.672-1.5-1.5-1.5zm1.336-5l1.977-7h-16.813l2.938 7h11.898zm4.969-10l-3.432 12h-12.597l.839 2h13.239l3.474-12h1.929l.743-2h-4.195z" />
          </svg>
          <a class="text-white font-bold" routerLink="/payment">Check Out</a>
        </div>
      </div>
    </div>
  </section>
</div>
<div class="select-popup" [ngClass]="{'showPopUp': isPopupShow}">
  <div class="bg-white shadow-lg popup-container rounded-md">
    <div (click)="isPopupShow = false; isEditClicked = false; resetModel()"
      class="absolute -right-12 -top-2 w-12 h-12 z-40 cursor-pointer">
      <svg xmlns="http://www.w3.org/2000/svg" class="close-svg transform hover:rotate-90 fill-current" fill="none"
        viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    </div>
    <div class="m-container overflow-y-scroll ">
      <div class="header flex flex-col items-center pb-4">
        <p class="title">{{popupData['name']}}</p>
        <p>Cost: €{{popupData['amount']}}</p>
      </div>
      <!-- <div class="line h-1 border-red-800 opacity-20 border-dotted border-b-4 w-full "></div> -->
      <div class="spicy flex items-start flex-col">
        <p class="text-lg px-4 popup-head">Spicy Level</p>
        <div class="flex pl-4 flex-col  mt-2">
          <label class="inline-flex items-center">
            <input type="radio" name="spicyLevel" class="form-radio bg-gray-200 h-4 w-4 text-red-800"
              [(ngModel)]="cartData.spicyLevel" value="none">
            <span class="ml-2 text-gray-700">None</span>
          </label>
          <label class="inline-flex items-center">
            <input type="radio" name="spicyLevel" class="form-radio h-4 w-4 bg-gray-200 text-red-800"
              [(ngModel)]="cartData.spicyLevel" value="mild">
            <span class="ml-2 text-gray-700">Mild</span>
          </label>
          <label class="inline-flex items-center">
            <input type="radio" class="form-radio h-4 w-4 text-red-800 bg-gray-200" name="spicyLevel"
              [(ngModel)]="cartData.spicyLevel" value="medium">
            <span class="ml-2">Medium</span>
          </label>
          <label class="inline-flex items-center">
            <input type="radio" class="form-radio h-4 w-4 text-red-800 bg-gray-200" name="spicyLevel"
              [(ngModel)]="cartData.spicyLevel" value="spicy">
            <span class="ml-2">Spicy</span>
          </label>
        </div>
      </div>
      <!-- <div class="line h-1 border-red-800 opacity-20 border-dotted border-b-4 w-full "></div> -->

      <div class="add-more-tast" *ngIf="showStarters">
        <p class="text-lg mt-4 popup-head">Addons</p>
        <div class="select-add-on pl-4">
          <div class="block">
            <div class="mt-2 h-56 overflow-y-scroll overflow-x-hidden">
              <div *ngFor="let item of startersData;">
                <label class="inline-flex items-center cursor-pointer">
                  <input type="checkbox" class="form-checkbox bg-gray-200 text-red-800 rounded-sm"
                    (change)="onAddonSelect($event,item)" #checkboxes>
                  <div class="addon-price ml-2">
                    <p>{{item.name}}</p>
                    <p>€{{item.amount}}</p>
                  </div>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- <div *ngIf="showStarters" class="mt-2 line h-1 border-red-800 opacity-20 border-dotted border-b-4 w-full "></div> -->
      <div class="write-instruction mb-4">
        <p class="text-lg mt-4 mb-4 px-4 popup-head">Special note</p>
        <textarea class="border-2 ml-4 p-3 border-gray-200 rounded-sm form-textarea mt-1 block texta-area" rows="3"
          placeholder="Any instructions for our chief team ? " [(ngModel)]="cartData.specialNote"></textarea>
      </div>
    </div>
    <div class="flex items-center h-full justify-between pr-4 pl-4 bottom-bar w-full bg-red-800 shadow-2xl">
      <div class="total">
        <p class="text-lg text-white">Total: €{{((cartItemSelectedData && cartItemSelectedData['netAmount'] &&
          cartItemSelectedData['netAmount'] > 0) ? cartItemSelectedData['netAmount']:
          popupData['amount']) | number : '1.2-2'}}</p>
      </div>
      <div (click)="isCancelConfirm ? addToCard(popupData, 'new', ''): addToCard(popupData, '', '')"
        class="flex bg-gray-100 cursor-pointer zoom-in h-10 flex rounded-sm items-center justify-start pl-1">
        <svg class="fill-current text-black pl-1" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
          viewBox="0 0 24 24">
          <path
            d="M10 19.5c0 .829-.672 1.5-1.5 1.5s-1.5-.671-1.5-1.5c0-.828.672-1.5 1.5-1.5s1.5.672 1.5 1.5zm3.5-1.5c-.828 0-1.5.671-1.5 1.5s.672 1.5 1.5 1.5 1.5-.671 1.5-1.5c0-.828-.672-1.5-1.5-1.5zm1.336-5l1.977-7h-16.813l2.938 7h11.898zm4.969-10l-3.432 12h-12.597l.839 2h13.239l3.474-12h1.929l.743-2h-4.195z" />
        </svg>
        <p class="text-black font-bold px-2 flex">
          Add to Cart
          <span class="px-2" *ngIf="!isCancelConfirm && cartItemSelectedData && cartItemSelectedData['quantity']">
            ({{cartItemSelectedData['quantity']}})
          </span>

        </p>
      </div>
      <!-- <button  class="rounded-sm bg-white text-black border-red-800 border-2">Close</button> -->
    </div>
  </div>
</div>
<!-- Confirmation popup ------>
<div class="select-popup confirm-popup" [ngClass]="{'showPopUp': isConfirmPopup}">
  <div class="bg-white shadow-lg popup-container rounded-md">
    <div (click)="isPopupShow = false;isConfirmPopup= false;"
      class="absolute -right-8 -top-6 w-8 h-8 z-40 cursor-pointer">
      <svg xmlns="http://www.w3.org/2000/svg" class="close-svg transform hover:rotate-90 fill-current" fill="none"
        viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    </div>
    <div class="container">
      <p class="text">Would you like to repeat the same order with add-ons ?</p>
      <div class="button">
        <p class="cursor-pointer hover:border-b-4 hover:border-red-800"
          (click)="isConfirmPopup= false;isCancelConfirm=true;onCartEdit(cartItemSelectedData)">Cancel</p>
        <p class="cursor-pointer hover:border-b-4 hover:border-red-800"
          (click)="addToCard(cartItemSelectedData, 'plus',''); isConfirmPopup = false">Proceed</p>
      </div>
    </div>

  </div>
</div>